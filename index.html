<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="prettyDate.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
  	<header>
  		<h1>Twittler</h1>
  	<header>

  	<aside class='page'>
  		<section>UserInfo</section>
  	</aside>

  	<section id='feed' class='page'>
  		
  	</section>

  	<aside class='page'>
  		<section>Visitor</section>
  	</aside>

    <script>

      $(document).ready(function(){
        var $feed = $('#feed');
        $feed.html('');

        // function to print out and create properties for new tweets
        var printTweet = function(){
        	$feed.html('<div id=\'poop\'></div>');    	
	        var index = streams.home.length - 1;
	        while(index >= 0){
	          var tweet = streams.home[index];
	          var $tweet = $('<div></div>');

	          // set up clickable username
	          var $username = $('<a href=\'#\'></a>');
	          $username.text('@' + tweet.user);
	          $username.addClass(tweet.user);

	          // set up individual tweet properties, use prettyDate to format to relative time
	          $tweet.text(': ' + tweet.message  + ' || time: ' + (tweet.created_at.toLocaleString())); 
	          $tweet.prepend($username);
	          $tweet.addClass(tweet.user);
	          $tweet.addClass('tweet');

	          // set up on click listener for username
	          var setOnclick = function(userClass){
		          $username.on('click', function(){
		          	$('.tweet').hide();
		          	$('.'+userClass).show();
		          });
	          }(tweet.user);

	          $tweet.appendTo($feed);
	          index -= 1;
	        }
        setTimeout(printTweet, 3000);
    		}

    		printTweet();

      });

    </script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </body>
</html>
